<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>Mi Liga Fantasy - LaLiga</title>
  <link rel="icon" type="image/png" href="imagenes\LogoLaLigaSinFondo.png">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white">

<!-- T√≠tulo principal con im√°genes en l√≠nea -->
<header class="py-6 shadow-lg bg-black flex justify-center items-center gap-3">
  <img src="imagenes/LogoFantasySinFondo.png" 
       alt="Logo Fantasy sin fondo" 
       class="max-w-full h-24 md:h-32 lg:h-40">
</header>

<!-- Barra de navegaci√≥n con dropdown -->
<nav class="bg-red-600 text-white py-3 flex justify-center shadow-md relative">
  <div class="relative">
    <!-- Bot√≥n principal -->
    <button onclick="toggleMenu()" class="px-4 py-2 rounded font-semibold bg-red-700 hover:bg-red-500">
      Men√∫ ‚ñæ
    </button>

    <!-- Men√∫ desplegable -->
    <div id="dropdownMenu" class="absolute left-0 mt-2 w-40 bg-red-700 rounded shadow-lg hidden">
      <button onclick="showSection('clasificacion', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Clasificaci√≥n Fantasy</button>
      <button onclick="showSection('jornadas', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Jornadas</button>
      <button onclick="showSection('clasificacionLaLiga', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Clasificaci√≥n LALIGA</button>
      <button onclick="showSection('reglamento', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Reglamento</button>
     <!-- <button onclick="showSection('estadisticas', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Estadisticas</button>-->


    </div>
  </div>
</nav>


  <main class="max-w-6xl mx-auto px-4 py-6 space-y-8">
<!-- Reglamento -->
<section id="reglamento" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">

</section>

  <!-- Clasificaci√≥n LALIGA -->
<section id="clasificacionLaLiga" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">
  <h2 class="text-2xl font-semibold mb-4 text-red-400">Clasificaci√≥n LaLiga</h2>
  <!-- Tabla de Clasificaci√≥n LALIGA -->
<div class="overflow-x-auto">
    <table class="table-auto w-full text-center border border-gray-700 text-white">
      <thead class="bg-gray-800">
        <tr>
          <th class="px-2 py-1">Pos</th>
          <th class="px-2 py-1">Equipo</th>
          <th class="px-2 py-1">J</th>
          <th class="px-2 py-1">G</th>
          <th class="px-2 py-1">E</th>
          <th class="px-2 py-1">P</th>
          <th class="px-2 py-1">GF</th>
          <th class="px-2 py-1">GC</th>
          <th class="px-2 py-1">DIF</th>
          <th class="px-2 py-1">PTS</th>
        </tr>
      </thead>
      <tbody id="tablaClasificacion"></tbody>
<tfoot class="bg-gray-800 text-gray-300">
  <tr>
    <td colspan="10" class="px-2 py-4 text-left">
      <div class="grid grid-cols-3 gap-6">
        <!-- Columna 1: Leyenda de colores -->
        <div>
          <p class="mb-2"><strong class="text-blue-400">üîµ</strong> Champions League</p>
          <p class="mb-2"><strong class="text-orange-400">üü†</strong> Europa League</p>
          <p class="mb-2"><strong class="text-green-400">üü¢</strong> Conference League</p>
          <p class="mb-4"><strong class="text-red-400">üî¥</strong> Descenso</p>
        </div>

        <!-- Columna 2: Glosario (Parte 1) -->
        <div>
          <ul class="list-disc list-inside text-sm">
            <li><strong>J:</strong> Partidos jugados</li>
            <li><strong>G:</strong> Partidos ganados</li>
            <li><strong>E:</strong> Empates</li>
            <li><strong>P:</strong> Derrotas</li>
          </ul>
        </div>

        <!-- Columna 3: Glosario (Parte 2) -->
        <div>
          <ul class="list-disc list-inside text-sm">
            <li><strong>GF:</strong> Goles a favor</li>
            <li><strong>GC:</strong> Goles en contra</li>
            <li><strong>DIF:</strong> Diferencia de goles</li>
            <li><strong>PTS:</strong> Puntos</li>
          </ul>
        </div>
      </div>
    </td>
  </tr>
</tfoot>
    </table>
  </div>
</section>



  <!-- ESTADISTICAS -->
    <section id="estadisticas" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">
     <h2 class="text-2xl font-semibold mb-4 text-red-400">Estadisticas proximamente ....</h2>
    </section>

    <!-- Clasificaci√≥n Final -->
    <section id="clasificacion" class="bg-gray-900 p-6 rounded-2xl shadow-lg">
     <h2 class="text-2xl font-semibold mb-4 text-red-400 flex items-center gap-2">
  Clasificaci√≥n Final
  <button onclick="toggleInfo()" class="text-white rounded-full w-6 h-6 flex items-center justify-center">
    ‚ÑπÔ∏è
  </button>
</h2>

<!-- Informaci√≥n oculta -->
<p id="infoClasificacion" class="hidden text-gray-300 bg-gray-800 p-3 rounded-lg mb-4">
  Tocando los titulares de la tabla se ordenan segun (Club alfabeticamente, puntos o dinero).
</p>

      
      <div class="overflow-x-auto">
        <table class="table-auto w-full text-center border border-gray-700 text-white" id="finalTable">
          <thead class="bg-gray-800">
            <tr>
              <th class="px-2 py-1 cursor-pointer" onclick="sortTable('name')">Club</th>
              <th class="px-2 py-1 cursor-pointer" onclick="sortTable('points')">Puntos</th>
              <th class="px-2 py-1 cursor-pointer" onclick="sortTable('money')">Dinero (‚Ç¨)</th>
            </tr>
          </thead>
          <tbody id="finalTableBody"></tbody>
        </table>
      </div>

      <!-- Bote Final -->
      <div class="mt-6 p-4 bg-red-600 rounded-lg text-white font-semibold text-lg">
        üí∞ Bote Final: <span id="boteFinal">0</span> ‚Ç¨
      </div>
    </section>

    <!-- Jornadas -->
    <section id="jornadas" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">
     <h2 class="text-2xl font-semibold mb-4 text-red-400 flex items-center gap-2">
  Jornadas 
  <button onclick="toggleInfo2()" class="text-white rounded-full w-6 h-6 flex items-center justify-center">
    ‚ÑπÔ∏è
  </button>
</h2>

<!-- Informaci√≥n oculta -->
<p id="infoJornadas" class="hidden text-gray-300 bg-gray-800 p-3 rounded-lg mb-4">
  La tabla de puntacion actualizada se a√±adir√° 24h despu√©s del √∫ltimo partido disputado de la jornada.
</p>


      <!-- Paginaci√≥n -->
      <div class="flex flex-wrap gap-2 mb-4" id="pagination"></div>

      <!-- Tabla de la jornada -->
      <div class="overflow-x-auto">
        <table class="table-auto w-full text-center border border-gray-700 text-white">
          <thead class="bg-gray-800">
            <tr>
              <th>Club</th>
              <th>Puntos</th>
              <th>Dinero (‚Ç¨)</th>
            </tr>
          </thead>
          <tbody id="jornadaTableBody"></tbody>
        </table>
      </div>
    </section>

  </main>

  <script>

    // ==== Aparecer contenido de otros html1 ====
   async function loadPartial(id, file) {
    const resp = await fetch(file);
    document.getElementById(id).innerHTML = await resp.text();
  }

  loadPartial("reglamento", "html/reglamento.html");
    // ==== CONFIGURACI√ìN DE DATOS MANUAL ====

    const clubs = [
      { name: "MrMaxi01" },
      { name: "su_florentineza123" },
      { name: "tonidiaz22" },
      { name: "Juanjonete04" },
      { name: "Kino04" },
      { name: "La Sergioneta CF" },
      { name: "Achoman" },
      { name: "Philip$" },
      { name: "Juanpm_43" },
      { name: "Rabovic" },
    ];

    // Datos por jornada (ejemplo)
    const jornadas = [
      [
        { club: "MrMaxi01", puntos: 72, penalizacion: 0, dinero: 0 },
        { club: "su_florentineza123", puntos: 96, penalizacion: 0, dinero: 0 },
        { club: "tonidiaz22", puntos: 68, penalizacion: 1, dinero: 1 },
        { club: "Juanjonete04", puntos: 75, penalizacion: 0, dinero: 0 },
        { club: "Kino04", puntos: 86, penalizacion: 0, dinero: 0 },
        { club: "La Sergioneta CF", puntos: 87, penalizacion: 0, dinero: 0 },
        { club: "Achoman", puntos: 53, penalizacion: 2, dinero: 2 },
        { club: "Philip$", puntos: 71, penalizacion: 0, dinero: 0 },
        { club: "Juanpm_43", puntos: 50, penalizacion: 3, dinero: 3 },
        { club: "Rabovic", puntos: 78, penalizacion: 0, dinero: 0 }        
      ],
      [
        { club: "MrMaxi01", puntos: 66, penalizacion: 0, dinero: 0 },
        { club: "su_florentineza123", puntos: 92, penalizacion: 0, dinero: 0 },
        { club: "tonidiaz22", puntos: 84, penalizacion: 0, dinero: 0 },
        { club: "Juanjonete04", puntos: 35, penalizacion: 3, dinero: 3 },
        { club: "Kino04", puntos: 72, penalizacion: 0, dinero: 0 },
        { club: "La Sergioneta CF", puntos: 81, penalizacion: 0, dinero: 0 },
        { club: "Achoman", puntos: 67, penalizacion: 0, dinero: 0 },
        { club: "Philip$", puntos: 66, penalizacion: 1, dinero: 1 },
        { club: "Juanpm_43", puntos: 47, penalizacion: 2, dinero: 2 },
        { club: "Rabovic", puntos: 81, penalizacion: 0, dinero: 0 }        
      ],
      [
        { club: "MrMaxi01", puntos: 48, penalizacion: 3, dinero: 3 },
        { club: "su_florentineza123", puntos: 84, penalizacion: 0, dinero: 0 },
        { club: "tonidiaz22", puntos: 53, penalizacion: 2, dinero: 2 },
        { club: "Juanjonete04", puntos: 66, penalizacion: 0, dinero: 0 },
        { club: "Kino04", puntos: 65, penalizacion: 0, dinero: 0 },
        { club: "La Sergioneta CF", puntos: 62, penalizacion: 0, dinero: 0 },
        { club: "Achoman", puntos: 69, penalizacion: 0, dinero: 0 },
        { club: "Philip$", puntos: 79, penalizacion: 0, dinero: 0 },
        { club: "Juanpm_43", puntos: 67, penalizacion: 0, dinero: 2 },
        { club: "Rabovic", puntos: 53, penalizacion: 1, dinero: 1 }        
      ], 
    ];

    // ==== CLASIFICACI√ìN FINAL ====
    let clasificacion = clubs.map(c => ({
      name: c.name,
      puntosTotales: 0,
      dineroTotal: 0
    }));

    jornadas.forEach(jornada => {
      jornada.forEach(entry => {
        let club = clasificacion.find(c => c.name === entry.club);
        if (club) {
          club.puntosTotales += entry.puntos;
          club.dineroTotal += entry.dinero;
        }
      });
    });
  // Ordenar por puntos de mayor a menor antes de renderizar
    clasificacion.sort((a, b) => b.puntosTotales - a.puntosTotales);

    const finalTableBody = document.getElementById("finalTableBody");
    const boteFinalSpan = document.getElementById("boteFinal");

    function renderFinalTable(data) {
      finalTableBody.innerHTML = "";
      let totalBote = 0;
      data.forEach(club => {
        totalBote += club.dineroTotal;
        finalTableBody.innerHTML += `
          <tr class="border-t border-gray-700">
            <td class="py-1 text-center">${club.name}</td>
            <td class="py-1">${club.puntosTotales}</td>
            <td class="py-1">${club.dineroTotal}</td>
          </tr>
        `;
      });
      boteFinalSpan.textContent = totalBote;
    }

    renderFinalTable(clasificacion);

    // ==== ORDENAR TABLA FINAL ====
    function sortTable(by) {
      if (by === "name") clasificacion.sort((a,b) => a.name.localeCompare(b.name));
      if (by === "points") clasificacion.sort((a,b) => b.puntosTotales - a.puntosTotales);
      if (by === "money") clasificacion.sort((a,b) => b.dineroTotal - a.dineroTotal);
      renderFinalTable(clasificacion);
    }

    // ==== PAGINACI√ìN DE JORNADAS ====
    const pagination = document.getElementById("pagination");
    const jornadaTableBody = document.getElementById("jornadaTableBody");

    function renderPagination() {
      for (let i = 0; i < jornadas.length; i++) {
        const btn = document.createElement("button");
        btn.textContent = `J${i+1}`;
        btn.className = "px-2 py-1 bg-red-600 hover:bg-red-500 rounded";
        btn.onclick = () => renderJornada(i);
        pagination.appendChild(btn);
      }
    }

    function renderJornada(index) {
      jornadaTableBody.innerHTML = "";
      // Copia y ordena la jornada por puntos de mayor a menor
      const jornadaOrdenada = [...jornadas[index]].sort((a, b) => b.puntos - a.puntos);
      jornadaOrdenada.forEach(entry => {
        const rowClass = entry.penalizacion > 0 ? "bg-red-900" : "";
        jornadaTableBody.innerHTML += `
          <tr class="border-t border-gray-700 ${rowClass}">
            <td class="py-1">${entry.club}</td>
            <td class="py-1">${entry.puntos}</td>
            <td class="py-1">${entry.dinero}</td>
          </tr>
        `;
      });
    }
    renderPagination();
    renderJornada(0);

    // ==== MOSTRAR SECCIONES SEG√öN MEN√ö ====
    function showSection(section) {
  const sections = ["clasificacion", "jornadas", "reglamento", "calendario"];
  sections.forEach(id => document.getElementById(id).classList.add("hidden"));
  document.getElementById(section).classList.remove("hidden");
}


function toggleInfo2() {
  const info = document.getElementById("infoJornadas");
  info.classList.toggle("hidden");
}
function toggleInfo() {
  const info = document.getElementById("infoClasificacion");
  info.classList.toggle("hidden");
}
function toggleMenu() {
  const menu = document.getElementById("dropdownMenu");
  menu.classList.toggle("hidden");
}

// Cierra el men√∫ si clicas fuera
document.addEventListener("click", function(event) {
  const menu = document.getElementById("dropdownMenu");
  if (!event.target.closest("nav")) {
    menu.classList.add("hidden");
  }
});

// Muestra la secci√≥n y cierra el men√∫
function showSection(section, btn) {
  const sections = ["clasificacion", "jornadas", "reglamento", "estadisticas","clasificacionLaLiga"];
  
  // Oculta todas las secciones
  sections.forEach(id => document.getElementById(id).classList.add("hidden"));
  document.getElementById(section).classList.remove("hidden");

  // Cierra el men√∫ desplegable despu√©s de elegir
  document.getElementById("dropdownMenu").classList.add("hidden");
}

//=== CARGAR TABLA DE CLASIFICACION LALIGA ====
// Funci√≥n para asignar color seg√∫n la posici√≥n
  function getPosColor(pos) {
    const num = parseInt(pos);
    if ([1, 2, 3, 4].includes(num)) return "text-blue-400 font-bold";
    if (num === 5) return "text-orange-400 font-bold";
    if (num === 6) return "text-green-400 font-bold";
    if ([18, 19, 20].includes(num)) return "text-red-500 font-bold";
    return ""; // Sin color para otras posiciones
  }
// Funci√≥n para actualizar los nombres seg√∫n orientaci√≥n
function actualizarNombresClub() {
  const isMobile = window.innerWidth <= 768;
  const isPortrait = window.matchMedia("(orientation: portrait)").matches;

  document.querySelectorAll("[data-club]").forEach(span => {
    const nombre = span.dataset.club;
    const codigo = span.dataset.codigo;

    // Cambiamos solo el texto despu√©s del icono
    span.querySelector(".nombreClub").textContent = (isMobile && isPortrait) ? codigo : nombre;
  });
}

// Cargar JSON y llenar la tabla
fetch("tablaLaliga/clasificacion_laliga.json")
  .then(response => response.json())
  .then(data => {
    const tbody = document.getElementById("tablaClasificacion");
    tbody.innerHTML = "";

    data.forEach(equipo => {
      const tr = document.createElement("tr");

      // Posici√≥n con color seg√∫n regla
      const posClass = getPosColor(equipo.posicion);
      const tdPos = `<td class="border border-gray-700 ${posClass} font-bold">${equipo.posicion}</td>`;

      // Celda del club con dataset para cambiar texto luego
      const tdClub = `
        <td class="border border-gray-700 px-2 py-1">
          <div class="flex items-center justify-between">
            <span class="flex items-center" data-club="${equipo.club}" data-codigo="${equipo.codigo}">
              <img src="imagenes/Clubes/${equipo.codigo}.png" alt="${equipo.club}" class="w-6 h-6 mr-2">
              <span class="nombreClub">${equipo.club}</span>
            </span>
          </div>
        </td>
      `;

      // Estad√≠sticas nombradas
      const stats = ["J","G","E","P","GF","GC"].map(key => 
        `<td class="border border-gray-700">${equipo.estadisticas[key]}</td>`
      ).join("");

      // DIF con color seg√∫n valor
      const dif = equipo.estadisticas["DIF"];
      const difClass = dif > 0 ? "text-green-400 font-bold" : (dif < 0 ? "text-red-400 font-bold" : "");
      const tdDif = `<td class="border border-gray-700 ${difClass}">${dif}</td>`;

      // PTS normal
      const tdPts = `<td class="border border-gray-700">${equipo.estadisticas["PTS"]}</td>`;

      // Insertar fila
      tr.innerHTML = tdPos + tdClub + stats + tdDif + tdPts;
      tbody.appendChild(tr);
    });

    // Ajuste inicial seg√∫n orientaci√≥n
    actualizarNombresClub();
  })
  .catch(err => console.error("Error cargando JSON:", err));

// Solo actualiza el texto, no recrea la tabla => sin tirones
window.addEventListener("resize", actualizarNombresClub);
window.addEventListener("orientationchange", actualizarNombresClub);
</script>
</body>
</html>

